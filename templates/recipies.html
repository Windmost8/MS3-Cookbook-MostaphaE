{% extends "base.html" %}
{% block content %}

<main>
    <div class="row">
        <div class="col s12 m8 offset-m2">
            <div class="card-panel border">
                <!--materlize typograpy class-->
                <p class="flow-text center-align text-darken-4">Welcome... friends and family,
                    to an online platform to learn as we eat, or eat as we learn. Welcome to <i>reCook</i>! Enjoy.
                </p>
            </div>
        </div>
    </div>

    <h3 class="text-darken-4 center-align"><i>Featured Recipies</i></h3>
    <h6 class="text-darken-4 center-align">(<b>Click</b> on a recipie name listed below to view! Alternatively <b>search</b> 
        for any recipie names or ingredients.)</h6>
    <h6 class="text-darken-4 center-align">Or perhaps you would rather <a href="{{ url_for('login') }}">add </a>your own?</h6>
    <h6 class="text-darken-4 center-align"><i class="fas fa-exclamation-circle orange-text"></i> Indicates your own recipies.</h6>

    <br>

    <div class="row grey lighten-5">
        <form action="{{ url_for('search') }}" method="post" class="col s12">
            <div class="row valign-wrapper center-align">
                <div class="input-field col s12 m12">
                    <i class="fas fa-search prefix text-darken-4"></i>
                    <input type="text" name="query" id="query" minlength="3" class="validate" required>
                    <label for="query">Search</label>
                </div>
            </div>
            <div class="btnflex">
                <a href="{{ url_for('get_recipies') }}" class="red btn text-shadow space">Reset</a>
                <button type="submit" class="green darken-1 btn text-shadow space">
                    Find
                </button>
            </div>
        </form>
    </div>

    <!--the special character ">" shows as a problem, but &gt; does not work instead-->
    {% if recipies|length > 0 %}
    <ul class="collapsible">
        {% for recipie in recipies %}
        <li>
            <div class="collapsible-header white-text brown text-shadow">
                <div class="col s3">
                    <i class="fas fa-caret-down"></i>
                </div>
                <div class="col s9">
                    <strong>{{ recipie.recipie_name }}</strong>
                </div>
                {% if (session.user|lower == recipie.created_by|lower or session.user|lower == "admin"|lower)  %}
                    <i class="fas fa-exclamation-circle orange-text"></i>
                {% endif %}
            </div>
            <div class="collapsible-body">
                <p><strong>Recipie Name:</strong><i> {{ recipie.recipie_name }}</i></p>
                <p><strong>Category:</strong><i> {{ recipie.category_name }}</i></p>
                <p><strong>Preparation:</strong><i> {{ recipie.preparation }}</i></p>
                <p><strong>Ingredients:</strong><i> {{ recipie.ingredients }}</i></p>
                <p><strong>Special Tools:</strong><i> {{ recipie.special_tools }}</i></p>
                <p><strong>By:</strong><i> {{ recipie.created_by }}</i></p>
                {% if (session.user|lower == recipie.created_by|lower or session.user|lower == "admin"|lower)  %}
                    <a href="{{ url_for('delete_recipie', recipie_id=recipie._id) }}" title="delete" class="delete btn-small red" 
                    onclick="return confirm('Are you sure you want to delete this item')">Delete</a>
                    <a href="{{ url_for('edit_recipie', recipie_id=recipie._id) }}" class="btn-small green darken-1">Edit</a>
                {% endif %}
            </div>
        </li>
        {% endfor %}
    </ul>
    {% else %}
        <h3 class="red-text text-darken-4 center-align">No Results Found</h3>
    {% endif %}
    
</main>    
{% endblock %}